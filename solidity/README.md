# MOAC联盟链

MOAC区块链旨在提供一种可扩展且有弹性的区块链，通过分层化的结构来支持数字资产交易、数据访问和流程控制。 它创建了一个框架以允许用户用高效的方式执行智能合约。它还提供了开发的体系结构，采用底层基础设施来快速简便地产生子区块链。 MOAC底层为基础层，采用POW共识，上层为应用层，采用可插拔的共识机制，从而实现根据需求采用适合的共识机制的效果。

StormChain通过实现PBFT共识，为MOAC打造了一条联盟链。为应用层区块链的架设提供必要的技术和部件，同时为新想法的测试、私有链的部署、复杂任务的处理和智能合约的应用提供解决方案。

这里将介绍如何在MOAC主网上，通过注册和质押MOAC，部署一条联盟链。

首先，需要在MOAC主网上部署一个智能合约[ApplicationChain.sol](ApplicationChain.sol)。

用户需要确定如下四个参数：

* blockSec - 出块速度。也就是多少秒出一次块。MOAC联盟链采用PBFT共识，每个区块都是终极确认，出块速度非常固定。缺省设置为7秒，但用户可以选择任何整数。

* flushNumber - 隔多少个应用链区块需要刷新一次。刷新越多，主链对联盟链的背书越强。但是消耗的墨客也越多。建议根据应用链上的应用需求来决定是每小时，每天，还是每月进行一次刷新。刷新最少需要0.01个MOAC。

* *initial_validators 创世验证人列表。墨客联盟链是授权联盟链。所以要设定一组创世验证人的地址。

* 最后，注册生成MOAC联盟应用链需要支付MOAC，最少多少个由墨客基金会通过对一个固定钱包地址转账数量来指定。

任何人可以通过调用 addFund() 函数往合约里加钱。

只有合约管理员可以通过调用 withdrawFund() 函数从合约里拿钱。

合约创建者是第一个管理员，管理员可以增删其他管理员，但不能删自己。这样合约创建者就可以把合约给到未来的主人，且能保证合约永远有一个管理员。

合约部署成功后，可以通过调用 getGenesisInfo() 拿到MOAC联盟应用链的创世文件。MOAC联盟应用链的ChainID，就是合约生成的MOAC主链区块高度。

MOAC联盟应用链部署成功后，每隔flushNumber个区块就会对主链进行刷新，直到合约中的MOAC耗尽。



